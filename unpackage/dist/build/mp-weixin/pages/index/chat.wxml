<view><my-message class="vue-ref" vue-id="1" data-ref="myMessage" bind:__l="__l"></my-message><view class="{{['my-bar fixed',$config.bgClass]}}" style="{{(topBar.style)}}"><navigator class="action ter" style="width:15%;" open-type="navigateBack"><text class="cuIcon-back margin-left-sm"></text><block wx:if="{{chat.count}}"><view class="topBar-tag round">{{chat.count>99?'99+':chat.count}}</view></block><block wx:else><view>{{i18n.back}}</view></block></navigator><view class="content "><view class="text-cut text-center" style="width:220px;">{{chat.nickname?chat.nickname:topBar.title}}</view></view><view style="width:15%;"></view></view><view style="{{(topBar.style)}}"></view><view class="my-bar fixed" style="margin-top:180rpx;"><view data-event-opts="{{[['tap',[['test1']]]]}}" class="cu-btn sm bg-red margin-sm" bindtap="__e">{{scrollToView}}</view><view data-event-opts="{{[['tap',[['test2']]]]}}" class="cu-btn sm bg-red margin-sm" bindtap="__e">按钮2</view><view data-event-opts="{{[['tap',[['test3']]]]}}" class="cu-btn sm bg-red margin-sm" bindtap="__e">按钮3</view></view><scroll-view class="scroll-view" style="{{('top:'+CustomBar+'px')}}" scroll-y="true" scroll-top="{{scrollTop}}" scroll-with-animation="{{scrollAnimation}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><block wx:for="{{record}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-chat" id="{{'msg'+item.id}}"><block wx:if="{{item.type=='tips'}}"><block><view class="cu-info round text-center">{{item.value}}</view></block></block><block wx:else><block><block wx:if="{{item.from==userInfo.id}}"><view class="cu-item self"><block wx:if="{{item.state=='Sending'}}"><view class="state anim-spin"><text class="cuIcon-loading text-orange text-xxl"></text></view></block><block wx:else><block wx:if="{{item.state=='Fail'}}"><view class="state"><text class="cuIcon-infofill text-red text-xxl"></text></view></block></block><view class="main"><block wx:if="{{item.type=='images'}}"><image src="{{item.value}}" mode="widthFix"></image></block><block wx:else><block wx:if="{{item.type=='voice'}}"><view class="content shadow"><text class="cuIcon-sound text-xxl padding-right-xl"></text></view></block><block wx:else><view class="content shadow text-value"><text>{{item.value}}</text></view></block></block></view><view class="cu-avatar radius" style="{{('background-image:url('+userInfo.avatar+'),url('+$config.cdnUrl+'/assets/img/avatar.png);')}}"></view></view></block><block wx:else><view class="cu-item"><view class="cu-avatar radius" style="{{('background-image:url('+(item.avatar?item.avatar:chat.avatar)+'),url('+$config.cdnUrl+'/assets/img/avatar.png);')}}"></view><view class="main"><block wx:if="{{item.type=='images'}}"><image src="{{item.value}}" mode="widthFix"></image></block><block wx:else><block wx:if="{{item.type=='voice'}}"><view class="content shadow"><text class="cuIcon-sound text-xxl padding-right-xl"></text></view></block><block wx:else><view class="content shadow text-value"><text>{{item.value}}</text></view></block></block></view></view></block></block></block></view></block></scroll-view><view class="cu-bar foot input" style="{{'bottom:'+(InputBottom+'px')+';'}}"><textarea class="input-textarea solid-bottom" maxlength="{{-1}}" confirm-type="send" auto-height data-event-opts="{{[['input',[['__set_model',['$0','inputText','$event',[]],['chat']]]]]}}" value="{{chat.inputText}}" bindinput="__e"></textarea><view data-event-opts="{{[['tap',[['sendBtn']]]]}}" class="send-btn" bindtap="__e"><button class="cu-btn shadow bg-blue ">{{i18n.send}}</button></view></view></view>