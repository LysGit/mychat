(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-profile"],{6187:function(t,i,e){"use strict";e.r(i);var o=e("f8d8"),n=e("e021");for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);var s,r=e("f0c5"),c=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"0deab5cc",null,!1,o["a"],s);i["default"]=c.exports},e021:function(t,i,e){"use strict";e.r(i);var o=e("fcf1"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},f8d8:function(t,i,e){"use strict";var o,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"moyi-bg-a"},[e("cu-custom",{attrs:{bgColor:"bg-black",isAbs:!0,isBack:!0}},[e("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),e("template",{attrs:{slot:"content"},slot:"content"},[t._v("个人资料")])],2),e("v-uni-view",{staticClass:"moyi-bg-a moyi-te-a",staticStyle:{height:"100vh"},style:"padding-top:"+t.base.CustomBar+"px"},[e("v-uni-view",{staticClass:"cu-form-group text-center grid col-1 "},[e("v-uni-view",{staticClass:"align-center padding-tb",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.uploadAvatar()}}},[e("v-uni-view",{staticClass:"cu-avatar round xxl",style:"background-image:url("+t.profile.avatar+");"},[e("v-uni-image",{attrs:{src:t.profile.frame,mode:"widthFix"}})],1)],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("用户昵称")]),e("v-uni-input",{staticClass:"text-right",attrs:{placeholder:"请输入昵称"},model:{value:t.profile.nickname,callback:function(i){t.$set(t.profile,"nickname",i)},expression:"profile.nickname"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("个人介绍")]),e("v-uni-input",{staticClass:"text-right",attrs:{placeholder:"一句话介绍一下你自己"},model:{value:t.profile.bio,callback:function(i){t.$set(t.profile,"bio",i)},expression:"profile.bio"}})],1)],1),e("v-uni-view",{staticClass:"bottom-card"},[e("v-uni-view",{staticClass:"cu-btn moyi-bg-c radius",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.subProfile()}}},[e("v-uni-text",{staticClass:"padding-tb-sm"},[t._v("保存资料")])],1)],1)],1)},a=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}))},fcf1:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={data:function(){return{base:{avatar:this.$config.avatar,CustomBar:this.CustomBar,title:this.$config.title},switchC:"",user:this.$common.userInfo(),profile:this.$common.userInfo()}},onLoad:function(){},methods:{DateChange:function(t){this.profile.birthday=t.detail.value},genderSwitch:function(t){this.profile.gender=t.detail.value?1:0},uploadAvatar:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){"chooseImage:ok"==i.errMsg&&t.$api.uploadFile(i["tempFilePaths"][0],(function(i){1==i.code?t.profile.avatar=t.$config.cdnUrl+i.data.url:t.$common.errorToShow(i.msg)}),(function(i){t.$common.errorToShow(i.response)}))}})},reProfile:function(){this.profile=this.user},subProfile:function(){var t=this,i=this.profile;JSON.stringify(i)==JSON.stringify(this.user)?this.$common.errorToShow("未做修改无需保存"):this.$api.editProfile(i,(function(e){e.code?(t.$common.errorToShow(e.msg),uni.$emit("refreshUser",i),t.$db.set("userInfo",i),setTimeout((function(){uni.navigateBack({})}),900)):t.$common.errorToShow(e.msg)}))}}};i.default=o}}]);